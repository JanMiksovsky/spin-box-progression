<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>7</title>

    <template id="spinBoxTemplate">
      <style>
        :host {
          display: inline-grid;
        }

        #input {
          grid-row-end: 3;
          grid-row-start: 1;
          text-align: right;
        }

        #upButton,
        #downButton {
          grid-column: 2;
          user-select: none;
        }
      </style>
      <input id="input"></input>
      <button id="upButton">▲</button>
      <button id="downButton">▼</button>
    </template>

    <script type="module">
      import * as internal from '../lib/core/internal.js';
      import ReactiveElement from '../lib/core/ReactiveElement.js';
  
      class SpinBox extends ReactiveElement {
        [internal.componentDidMount]() {
          super[internal.componentDidMount]();
          // Wire up event handlers.
          this[internal.ids].input.addEventListener('input', () => {
            this.value = this[internal.ids].input.value;
          });
          this[internal.ids].downButton.addEventListener("mousedown", () => {
            this.value--;
          });
          this[internal.ids].upButton.addEventListener("mousedown", () => {
            this.value++;
          });
        }
  
        get [internal.defaultState]() {
          return {
            ...super[internal.defaultState],
            value: 0
          };
        }

        [internal.render](changed) {
          super[internal.render](changed);
          if (changed.value) {
            // Render value state to input.
            this[internal.ids].input.value = this[internal.state].value;
          }
        }

        get [internal.template]() {
          return spinBoxTemplate;
        }

        get value() {
          return this[internal.state].value;
        }
        set value(value) {
          this[internal.setState]({ value });
        }
      }

      customElements.define('spin-box', SpinBox);
    </script>
  </head>

  <body>
    <spin-box></spin-box>
  <body>
    
</html>
